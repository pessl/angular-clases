<div class="card registrar-solicitud-asa">
  <div class="card-header custom-card-header">
    Registrar y Evaluar Solicitud de Acompañamiento Socioambiental
  </div>

  <div class="card-body">
    <div class="row mt-3 label">
      <div class="col-md-2">
        <label for="in_fechaInicio" class="form-label">Fecha Inicio</label>
      </div>
      <div class="col-md-2">
        <input type="date" name="in_fechaInicio" class="form-control">
      </div>
      <div class="col-md-2">
      </div>
      <div class="col-md-2">
        <label for="in_fechaFin" class="form-label">Fecha Fin</label>
      </div>
      <div class="col-md-2">
        <input type="date" name="in_fechaFin" class="form-control">
      </div>
    </div>

    <div class="row mt-5 label">
      <div class="col-md-8">
        <strong class="form-label">ADMINISTRADOS</strong>
      </div>
      <div class="col-md-4">
        <button class="btn btn-primary" (click)="openDialogAdm()">Buscar Administrados</button>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-12">
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <th>CÓDIGO</th>
              <th>NOMBRE O RAZÓN SOCIAL</th>
              <th></th>
            </thead>
            <tbody>

              <ng-container
                *ngIf="listaDeAdministrados.length == 0 then noHayAdministrados else mostrarTablaDeAdministrados"></ng-container>
              <ng-template #noHayAdministrados>
                <td colspan="3">Aún no se han seleccionado ADMINISTRADOS.</td>
              </ng-template>
              <ng-template #mostrarTablaDeAdministrados>
                <ng-container *ngFor="let administrado of listaDeAdministrados">
                  <tr>
                    <td>{{administrado.codigo}}</td>
                    <td>{{administrado.nombre}}</td>
                    <td>
                      <button class="btn btn-danger" style="color:white" (click)="removerAdministrado(administrado)">
                        <i class="fa-solid fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                </ng-container>
              </ng-template>
            </tbody>
          </table>
          <i style="margin: 10px; font-size: 13px;">(*) Se puede considerar más de 1 administrado</i>
        </div>
      </div>
    </div>

    <div class="row mt-5 label">
      <div class="col-md-8">
        <strong class="form-label">UNIDADES FISCALIZABLES</strong>
      </div>
      <div class="col-md-4">
        <button class="btn btn-primary" (click)="openDialogUF()">Buscar Unidad Fiscalizable</button>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-12">
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
              <th>CÓDIGO</th>
              <th>DESCRIPCIÓN</th>
              <th></th>
            </thead>
            <tbody>

              <ng-container
                *ngIf="listaDeUnidadFiscalizable.length == 0 then noHayUnidadesFiscalizables else mostrarTablaDeUnidadesFiscalizables"></ng-container>
              <ng-template #noHayUnidadesFiscalizables>
                <td colspan="3">Aún no se han seleccionado UNIDADES FISCALIZABLES.</td>
              </ng-template>
              <ng-template #mostrarTablaDeUnidadesFiscalizables>
                <ng-container *ngFor="let unidadesFiscalizable of listaDeUnidadFiscalizable">
                  <tr>
                    <td>{{unidadesFiscalizable.codigo}}</td>
                    <td>{{unidadesFiscalizable.nombre}}</td>
                    <td>
                      <button class="btn btn-danger" style="color:white" (click)="removerUnidadFiscalizable(unidadesFiscalizable)">
                        <i class="fa-solid fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                </ng-container>
              </ng-template>
            </tbody>
          </table>
          <i style="margin: 10px; font-size: 13px;">(*) Se puede considerar más de 1 Unidad Fiscalizable</i>
        </div>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-6">
        <div class="row mt-3 label">
          <div class="col-md-4">
            <label for="sel_AreaSolicitante" class="form-label">Área Solicitante</label>
          </div>
          <div class="col-md-8">
            <select class="form-select" id="sel_AreaSolicitante">
              <option selected>Seleccione</option>
            </select>
          </div>
        </div>

        <div class="row mt-3 label">
          <div class="col-md-4">
            <label for="sel_TipoAcomp" class="form-label">Tipo de Acompañamiento</label>
          </div>
          <div class="col-md-8">
            <select #tipoAcompaniamiento class="form-select" id="sel_TipoAcomp" (change)="setearTipoDeAcompanamiento(tipoAcompaniamiento.value)">
              <option selected>Seleccione</option>
              <option value="EAT">Evaluación Ambiental Temprana (EAT)</option>
              <option value="EAC">Evaluación Ambiental de Causalidad (EAC)</option>
              <option value="SOPORTE_PARTICIPACION">Supervisión ambiental o apoyo a una entidad pública</option>
            </select>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="row mt-5 label">
          <div class="col-md-6" style="text-align: center;">
            <label for="" class="form-label"><strong>DOCUMENTOS</strong></label>
        </div>
         <div class="col-md-6">
            <button class="btn btn-primary">Adjuntar Documentos</button>
          </div>
        </div>
      </div>

    </div>

    <div class="row mt-3 label">
      <div class="col-md-2">
        <label for="sel_TipoActividad" class="form-label">Tipo de Actividad</label>
      </div>
      <div class="col-md-4">
        <select class="form-select">
          <option selected>Seleccione</option>
            </select>
      </div>
      <div class="col-md-2">
        <label for="sel_SubSector" class="form-label">Subsector</label>
      </div>

      <div class="col-md-4">
        <select class="form-select">
          <option selected>Seleccione</option>
          <option>Agricultura</option>
          <option>Electricidad</option>
          <option>Hidrocarburos</option>
          <option>Industria</option>
          <option>Minería</option>
          <option>Pesquería</option>
          <option>Residuos Sólidos</option>
        </select>
      </div>
    </div>

    <div class="row mt-3 label">
      <div class="col-md-2">
        <label for="sel_Departamento" class="form-label">Departamento</label>
      </div>
      <div class="col-md-2">
        <select class="form-select">
          <option selected>Seleccione</option>
          <option>Lima</option>
        </select>
      </div>
      <div class="col-md-2">
        <label for="sel_Provincia" class="form-label">Provincia</label>
      </div>
      <div class="col-md-2">
        <select class="form-select">
          <option selected>Seleccione</option>
          <option></option>
        </select>
      </div>
      <div class="col-md-2">
        <label for="sel_Distrito" class="form-label">Distrito</label>
      </div>
      <div class="col-md-2">
        <select class="form-select">
          <option selected>Seleccione</option>
          <option></option>
        </select>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-md-12">
        <label for="ta_Asunto" class="form-label"><strong>ASUNTO</strong></label>
        <textarea class="form-control"></textarea>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-12">
        <label for="ta_Descripcion" class="form-label"><strong>DESCRIPCIÓN</strong></label>
        <textarea class="form-control"></textarea>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-12">
        <label for="ta_EscGlobal" class="form-label"><strong>ESCENARIO GLOBAL</strong></label>
        <textarea class="form-control"></textarea>
      </div>
    </div>

    <div class="row mt-3 label">
      <div class="col-md-4">
        <label for="in_ConfSocAso" class="form-label"><strong>CONFLICTO SOCIAL ASOCIADO</strong></label>
      </div>

      <div class="col-md-4">
        <ng-container
          *ngIf="conflictoSocial == null then noHayConflictoSocial else mostrarConflictoSocial"></ng-container>
          <ng-template #noHayConflictoSocial>
            <label>Aún no se han seleccionado un CONFLICTO SOCIAL.</label>
          </ng-template>
          <ng-template #mostrarConflictoSocial>
            <label type="search" name="in_ConfSocAso" class="form-control">{{ conflictoSocial.rotulo  }}</label>
          </ng-template>
      </div>
      <div class="col-md-4">
        <button class="btn btn-primary" (click)="openDialogCS()">Buscar Conflicto Social</button>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-8">
        <div class="row mt-3">
          <label class="form-label"><strong>¿Se acepta solicitud de acompañamiento?</strong></label>
        </div>
        <div class="mt-3 ms-5">
          <input name="r_Solicitud" type="radio" class="ms-5" (change)="setearAceptaSolicitud(true)"><label class="form-label">Si</label>
          <input name="r_Solicitud" type="radio" class="ms-5" (change)="setearAceptaSolicitud(false)"><label class="form-label">No</label>
        </div>
      </div>
      <div class="col-md-4" style="display: flex; justify-content: space-between;">
        <button class="btn btn-primary my-5">Cancelar</button>
        <button class="btn btn-primary my-5">Guardar</button>
        <button class="btn btn-primary my-5" (click)="respuestaSolicitud()">Siguiente</button>
      </div>
    </div>

  </div>

</div>
